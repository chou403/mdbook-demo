<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>docker - chou401</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="算法.html">算法</a></li><li class="chapter-item expanded affix "><a href="阻塞队列.html">阻塞队列</a></li><li class="chapter-item expanded affix "><a href="CompletableFuture.html">CompletableFuture</a></li><li class="chapter-item expanded affix "><a href="docker.html" class="active">docker</a></li><li class="chapter-item expanded affix "><a href="GC.html">GC</a></li><li class="chapter-item expanded affix "><a href="interview.html">interview</a></li><li class="chapter-item expanded affix "><a href="JDBC.html">JDBC</a></li><li class="chapter-item expanded affix "><a href="jenkins.html">jenkins</a></li><li class="chapter-item expanded affix "><a href="Lock.html">Lock</a></li><li class="chapter-item expanded affix "><a href="MQ.html">MQ</a></li><li class="chapter-item expanded affix "><a href="Mybatis.html">Mybatis</a></li><li class="chapter-item expanded affix "><a href="Mysql.html">Mysql</a></li><li class="chapter-item expanded affix "><a href="Netty.html">Netty</a></li><li class="chapter-item expanded affix "><a href="Slf4j.html">Slf4j</a></li><li class="chapter-item expanded affix "><a href="Spring.html">Spring</a></li><li class="chapter-item expanded affix "><a href="ThreadPoolExecutor.html">ThreadPoolExecutor</a></li><li class="chapter-item expanded affix "><a href="tools-install.html">tools-install</a></li><li class="chapter-item expanded affix "><a href="typora.html">typora</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">chou401</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="前提安装docker"><a class="header" href="#前提安装docker">前提安装DOCKER</a></h2>
<h2 id="安装配置工具"><a class="header" href="#安装配置工具">安装配置工具</a></h2>
<blockquote>
<p>yum install -y yum-utils </p>
</blockquote>
<h2 id="配置源"><a class="header" href="#配置源">配置源</a></h2>
<blockquote>
<p>sudo yum-config-manager <br />
--add-repo <br />
https://download.docker.com/linux/centos/docker-ce.repo
sudo yum-config-manager <br />
--add-repo <br />
http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</p>
</blockquote>
<h2 id="因为更新了源所以要更新yum缓存"><a class="header" href="#因为更新了源所以要更新yum缓存">因为更新了源所以要更新yum缓存</a></h2>
<blockquote>
<p>yum makecache fast</p>
</blockquote>
<h2 id="安装docker"><a class="header" href="#安装docker">安装DOCKER</a></h2>
<blockquote>
<p>yum install -y docker-ce docker-ce-cli containerd.io</p>
</blockquote>
<h2 id="配置docker镜像源为国内镜像"><a class="header" href="#配置docker镜像源为国内镜像">配置Docker镜像源为国内镜像</a></h2>
<blockquote>
<p>vim /etc/docker/daemon.json</p>
</blockquote>
<h2 id="写入文件内容"><a class="header" href="#写入文件内容">写入文件内容</a></h2>
<blockquote>
<p>{
&quot;registry-mirrors&quot;: [
&quot;https://registry.docker-cn.com&quot;,
&quot;http://hub-mirror.c.163.com&quot;,
&quot;https://docker.mirrors.ustc.edu.cn&quot;,
&quot;https://kfwkfulq.mirror.aliyuncs.com&quot;
],
&quot;max-concurrent-downloads&quot;: 10,
&quot;log-driver&quot;: &quot;json-file&quot;,
&quot;log-level&quot;: &quot;warn&quot;,
&quot;log-opts&quot;: {
&quot;max-size&quot;: &quot;10m&quot;,
&quot;max-file&quot;: &quot;3&quot;
},
&quot;data-root&quot;: &quot;/var/lib/docker&quot;
}</p>
</blockquote>
<h2 id="检查docker是否安装成功"><a class="header" href="#检查docker是否安装成功">检查docker是否安装成功</a></h2>
<blockquote>
<p>docker info</p>
</blockquote>
<h2 id="启动docker"><a class="header" href="#启动docker">启动docker</a></h2>
<blockquote>
<p>systemctl start docker</p>
</blockquote>
<h2 id="重启docker"><a class="header" href="#重启docker">重启docker</a></h2>
<blockquote>
<p>systemctl restart docker</p>
</blockquote>
<h2 id="设置docker开机自启"><a class="header" href="#设置docker开机自启">设置docker开机自启</a></h2>
<blockquote>
<p>systemctl enable docker</p>
</blockquote>
<h2 id="禁用docker开机自启"><a class="header" href="#禁用docker开机自启">禁用docker开机自启</a></h2>
<blockquote>
<p>systemctl disable docker</p>
</blockquote>
<h2 id="停止docker"><a class="header" href="#停止docker">停止docker</a></h2>
<blockquote>
<p>systemctl stop docker</p>
</blockquote>
<h2 id="查看docker-info中具体key的信息"><a class="header" href="#查看docker-info中具体key的信息">查看docker info中具体Key的信息</a></h2>
<blockquote>
<p>docker info | grep 'Docker Root Dir:'</p>
</blockquote>
<h2 id="浏览镜像文件"><a class="header" href="#浏览镜像文件">浏览镜像文件</a></h2>
<blockquote>
<p>docker images</p>
</blockquote>
<h2 id="查看镜像详情"><a class="header" href="#查看镜像详情">查看镜像详情</a></h2>
<blockquote>
<p>docker inspect 镜像名称或ID</p>
</blockquote>
<h2 id="查看镜像历史"><a class="header" href="#查看镜像历史">查看镜像历史</a></h2>
<blockquote>
<p>docker history 镜像名称或ID</p>
</blockquote>
<h2 id="导出镜像文件"><a class="header" href="#导出镜像文件">导出镜像文件</a></h2>
<blockquote>
<p>docker save 镜像名称或ID | gzip &gt; XXX.tar.gz</p>
</blockquote>
<h2 id="删除镜像文件"><a class="header" href="#删除镜像文件">删除镜像文件</a></h2>
<blockquote>
<p>docker image rm 镜像名称或ID</p>
</blockquote>
<h2 id="导入镜像文件"><a class="header" href="#导入镜像文件">导入镜像文件</a></h2>
<blockquote>
<p>docker load &lt; XXX.tar.gz</p>
</blockquote>
<h2 id="运行镜像文件"><a class="header" href="#运行镜像文件">运行镜像文件</a></h2>
<blockquote>
<p>docker run 镜像名</p>
</blockquote>
<h2 id="下载镜像"><a class="header" href="#下载镜像">下载镜像</a></h2>
<blockquote>
<p>docker pull 镜像名</p>
</blockquote>
<h2 id="创建并启动容器"><a class="header" href="#创建并启动容器">创建并启动容器</a></h2>
<blockquote>
<p>docker run -it xxx bash
注释:
xxx 代表镜像名或者imageId的前几位</p>
</blockquote>
<h2 id="查看容器"><a class="header" href="#查看容器">查看容器</a></h2>
<blockquote>
<p>docker ps -a</p>
</blockquote>
<h2 id="查看容器日志"><a class="header" href="#查看容器日志">查看容器日志</a></h2>
<blockquote>
<p>docker container logs 容器名称或ID</p>
</blockquote>
<h2 id="停止容器"><a class="header" href="#停止容器">停止容器</a></h2>
<blockquote>
<p>dicker container stop 容器名称或ID</p>
</blockquote>
<h2 id="重启容器"><a class="header" href="#重启容器">重启容器</a></h2>
<blockquote>
<p>dicker container restart 容器名称或ID</p>
</blockquote>
<h2 id="进入容器"><a class="header" href="#进入容器">进入容器</a></h2>
<blockquote>
<p>docker exec -it 容器名称或ID bash</p>
</blockquote>
<h2 id="删除容器需要先停止容器-如果容器正在运行则会出现问题"><a class="header" href="#删除容器需要先停止容器-如果容器正在运行则会出现问题">删除容器(需要先停止容器, 如果容器正在运行则会出现问题)</a></h2>
<blockquote>
<p>docker container rm 容器名称或ID</p>
</blockquote>
<h2 id="删除正在运行中的容器"><a class="header" href="#删除正在运行中的容器">删除正在运行中的容器</a></h2>
<blockquote>
<p>docker container rm -f 容器名称或ID</p>
</blockquote>
<h2 id="清理所有处于终止状态的容器"><a class="header" href="#清理所有处于终止状态的容器">清理所有处于终止状态的容器</a></h2>
<blockquote>
<p>docker container prune</p>
</blockquote>
<h2 id="安装dockercompose"><a class="header" href="#安装dockercompose">安装dockerCompose</a></h2>
<h2 id="下载"><a class="header" href="#下载">下载</a></h2>
<blockquote>
<p>curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</p>
<p>curl -L  &quot;http://ithltt.com/files/docker-compose-linux-x86_64&quot; -o /usr/local/bin/docker-compose</p>
</blockquote>
<h2 id="授权"><a class="header" href="#授权">授权</a></h2>
<blockquote>
<p>chmod +x /usr/local/bin/docker-compose</p>
</blockquote>
<h2 id="查看版本"><a class="header" href="#查看版本">查看版本</a></h2>
<blockquote>
<p>docker-compose --version</p>
</blockquote>
<h2 id="查看已经下载的镜像信息"><a class="header" href="#查看已经下载的镜像信息">查看已经下载的镜像信息</a></h2>
<blockquote>
<p>docker images</p>
</blockquote>
<h2 id="删除已经下载的镜像"><a class="header" href="#删除已经下载的镜像">删除已经下载的镜像</a></h2>
<blockquote>
<p>dicker rmi IMAGE_ID(镜像ID)</p>
</blockquote>
<h2 id="查看正在使用的容器"><a class="header" href="#查看正在使用的容器">查看正在使用的容器</a></h2>
<blockquote>
<p>docker ps -a</p>
</blockquote>
<h2 id="删除容器"><a class="header" href="#删除容器">删除容器</a></h2>
<blockquote>
<p>docker rm ID(容器ID)</p>
</blockquote>
<h2 id="导出已经下载的镜像"><a class="header" href="#导出已经下载的镜像">导出已经下载的镜像</a></h2>
<blockquote>
<p>docker save -o /root/xxx.image(导出的镜像路径和名称) ID(镜像ID)</p>
</blockquote>
<h2 id="导入镜像"><a class="header" href="#导入镜像">导入镜像</a></h2>
<blockquote>
<p>docker load -i xxx.image(镜像路径和名称)</p>
</blockquote>
<h2 id="为镜像指定名称和版本"><a class="header" href="#为镜像指定名称和版本">为镜像指定名称和版本</a></h2>
<blockquote>
<p>docker tag ID(镜像ID) name:version(指定的镜像名称:版本号) </p>
</blockquote>
<h2 id="使用镜像创建一个容器"><a class="header" href="#使用镜像创建一个容器">使用镜像创建一个容器</a></h2>
<blockquote>
<p>docker run -d -p 主机端口:容器端口 --name 容器名称 镜像名称:版本/镜像ID</p>
</blockquote>
<h2 id="复制文件到容器中"><a class="header" href="#复制文件到容器中">复制文件到容器中</a></h2>
<blockquote>
<p>docker cp /home/demo 容器ID:容器目录</p>
</blockquote>
<h2 id="查看容器日志-1"><a class="header" href="#查看容器日志-1">查看容器日志</a></h2>
<blockquote>
<p>docker logs -f 容器ID</p>
</blockquote>
<h2 id="进入容器内部-exit退出容器"><a class="header" href="#进入容器内部-exit退出容器">进入容器内部 exit退出容器</a></h2>
<blockquote>
<p>docker exec -it 容器ID bash</p>
</blockquote>
<h2 id="停止容器-1"><a class="header" href="#停止容器-1">停止容器</a></h2>
<blockquote>
<p>docker stop 容器ID</p>
</blockquote>
<h2 id="停止所有容器"><a class="header" href="#停止所有容器">停止所有容器</a></h2>
<blockquote>
<p>docker stop $(docker ps -qa)</p>
</blockquote>
<h2 id="删除指定容器"><a class="header" href="#删除指定容器">删除指定容器</a></h2>
<blockquote>
<p>docker rm 容器ID</p>
</blockquote>
<h2 id="删除所有容器"><a class="header" href="#删除所有容器">删除所有容器</a></h2>
<blockquote>
<p>docker rm $(docker ps -qa)</p>
</blockquote>
<h2 id="启动指定容器"><a class="header" href="#启动指定容器">启动指定容器</a></h2>
<blockquote>
<p>docker start 容器ID</p>
</blockquote>
<h2 id="数据库"><a class="header" href="#数据库">数据库</a></h2>
<blockquote>
<p>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 --name Mysql 镜像ID</p>
</blockquote>
<h2 id="共享目录数据卷创建-v01-数据卷名称"><a class="header" href="#共享目录数据卷创建-v01-数据卷名称">共享目录(数据卷)创建 V01: 数据卷名称</a></h2>
<blockquote>
<p>docker volume create V01</p>
</blockquote>
<h2 id="查看数据卷"><a class="header" href="#查看数据卷">查看数据卷</a></h2>
<blockquote>
<p>docker volume inspect V01</p>
</blockquote>
<h2 id="查看所有数据卷"><a class="header" href="#查看所有数据卷">查看所有数据卷</a></h2>
<blockquote>
<p>docker volume ls</p>
</blockquote>
<h2 id="删除数据卷"><a class="header" href="#删除数据卷">删除数据卷</a></h2>
<blockquote>
<p>docker volume rm 数据卷名称</p>
</blockquote>
<h2 id="使用数据卷"><a class="header" href="#使用数据卷">使用数据卷</a></h2>
<blockquote>
<p>docker run -v 数据卷名称:容器内部路径 镜像ID
docker run -v 路径:容器内部路径 镜像ID
例:
docker run -d -p 8080:8080 -v V01:/usr/local/tomcat/webapps/ --name tomcat 镜像ID</p>
</blockquote>
<h2 id="使用自定义镜像"><a class="header" href="#使用自定义镜像">使用自定义镜像</a></h2>
<blockquote>
<p>docker build -f /home/Dockearfile</p>
</blockquote>
<h2 id="使用自定义镜像dockerfile-生成镜像-注意镜像名不能有大写字母"><a class="header" href="#使用自定义镜像dockerfile-生成镜像-注意镜像名不能有大写字母">使用自定义镜像DockerFile 生成镜像 (注意镜像名不能有大写字母)</a></h2>
<blockquote>
<p>docker build -t 镜像名:版本号 .
docker build -t 镜像名:版本号 - &lt; /path/DockerFile(文件绝对路径, 脚本中不能使用相对路径!!)</p>
</blockquote>
<h4 id="本地构建-helloworldapp-镜像文件"><a class="header" href="#本地构建-helloworldapp-镜像文件">本地构建 helloworldapp 镜像文件</a></h4>
<blockquote>
<p>docker build -t helloworldapp .</p>
</blockquote>
<h4 id="本地运行-helloworldapp-镜像8088端口映射容器中3721端口"><a class="header" href="#本地运行-helloworldapp-镜像8088端口映射容器中3721端口">本地运行 helloworldapp 镜像，8088端口映射容器中3721端口</a></h4>
<blockquote>
<p>docker run -d -p 8088:3721 --name myapp helloworldapp</p>
</blockquote>
<h4 id="登录到acrazure容器库中"><a class="header" href="#登录到acrazure容器库中">登录到ACR（azure容器库）中</a></h4>
<blockquote>
<p>docker login <acrtest01>.azurecr.cn --username <testuser01></p>
</blockquote>
<h4 id="与acr关联本地镜像文件"><a class="header" href="#与acr关联本地镜像文件">与ACR关联本地镜像文件</a></h4>
<blockquote>
<p>docker tag helloworldapp:v1 <acrtest01>.azurecr.cn/helloworldapp:v1</p>
</blockquote>
<h4 id="push-镜像文件到acr中"><a class="header" href="#push-镜像文件到acr中">PUSH 镜像文件到ACR中</a></h4>
<blockquote>
<p>docker push <acrtest01>.azurecr.cn/helloworldapp:v1</p>
</blockquote>
<h2 id="指定基础镜像"><a class="header" href="#指定基础镜像">指定基础镜像</a></h2>
<blockquote>
<p>格式 第一行必须是FROM(不包括注释)
FROM <image>
FROM <image>:<tag>
FROM <image>@<digest>
实例:
FROM mysql:5.6</p>
</blockquote>
<h2 id="maintainer-维护者信息"><a class="header" href="#maintainer-维护者信息">MAINTAINER: 维护者信息</a></h2>
<blockquote>
<p>格式: 
MAINTAINER <name>
实例:
MAINTAINER wangsh3@yonyou.com</p>
</blockquote>
<h2 id="构建时候执行的命令"><a class="header" href="#构建时候执行的命令">构建时候执行的命令</a></h2>
<blockquote>
<p>RUN <COMMAND></p>
</blockquote>
<h3 id="copy-复制文件到容器中"><a class="header" href="#copy-复制文件到容器中">COPY: 复制文件到容器中</a></h3>
<h3 id="add-将本地文件添加到容器中-tar类型文件会自动解压网络压缩资源不会被解压-可以访问网络资源类似wget"><a class="header" href="#add-将本地文件添加到容器中-tar类型文件会自动解压网络压缩资源不会被解压-可以访问网络资源类似wget">ADD 将本地文件添加到容器中, tar类型文件会自动解压(网络压缩资源不会被解压), 可以访问网络资源,类似wget</a></h3>
<blockquote>
<p>ADD <SRC> ... <dest></p>
</blockquote>
<h3 id="entrypoint-配置容器使其可执行化-配合cmd可省去application只添加参数可以外部传递参数"><a class="header" href="#entrypoint-配置容器使其可执行化-配合cmd可省去application只添加参数可以外部传递参数">ENTRYPOINT: 配置容器,使其可执行化. 配合CMD可省去&quot;application&quot;,只添加参数（可以外部传递参数）</a></h3>
<blockquote>
<p>ENTRYPOINT <a href="%E4%BC%98%E5%85%88%E6%89%A7%E8%A1%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6">&quot;executable&quot;,&quot;parm1&quot;,&quot;parm2&quot;</a>
ENTRYPOINT command parm1 parm2(执行Shell内部命令)</p>
</blockquote>
<h2 id="构建容器后调用-容器启动时进行调用"><a class="header" href="#构建容器后调用-容器启动时进行调用">构建容器后调用 容器启动时进行调用</a></h2>
<blockquote>
<p>CMD <a href="%E4%BC%98%E5%85%88%E6%89%A7%E8%A1%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6">&quot;executable&quot;,&quot;parm1&quot;,&quot;parm2&quot;</a>
CMD [&quot;parm1&quot;,&quot;parm2&quot;](设置了ENTRYPOINT, 直接调用ENTRYPOINT添加参数)
CMD command parm1 parm2(执行Shell内部命令)</p>
</blockquote>
<h2 id="lab用于为镜像添加元数据-可以"><a class="header" href="#lab用于为镜像添加元数据-可以">LAB:用于为镜像添加元数据 可以</a></h2>
<blockquote>
<p>LABEL <Key>=<Value> <Key>=<Value> <Key>=<Value>
实例: 
LABEL Version=&quot;1.0&quot; Description=&quot;描述&quot; by=&quot;糖糖&quot;</p>
</blockquote>
<h2 id="env-设置环境变量"><a class="header" href="#env-设置环境变量">ENV: 设置环境变量</a></h2>
<blockquote>
<p>ENV <key> <Value>
ENV <key>=<Value></p>
</blockquote>
<h2 id="expose-指定外界交互的端口"><a class="header" href="#expose-指定外界交互的端口">EXPOSE: 指定外界交互的端口</a></h2>
<blockquote>
<p>EXPOSE <port> [<port>...]</p>
</blockquote>
<h2 id="volume--指定持久化目录"><a class="header" href="#volume--指定持久化目录">VOLUME : 指定持久化目录</a></h2>
<blockquote>
<p>VOLUME [&quot;/path/dir&quot;, &quot;/path/dir1&quot;]</p>
</blockquote>
<h2 id="workdir--工作目录-类似cd命令"><a class="header" href="#workdir--工作目录-类似cd命令">WORKDIR : 工作目录, 类似cd命令</a></h2>
<blockquote>
<p>WORKDIR /home/dir</p>
</blockquote>
<h2 id="user--指定运行容器的用户"><a class="header" href="#user--指定运行容器的用户">USER : 指定运行容器的用户</a></h2>
<blockquote>
<p>USER user:group</p>
</blockquote>
<h2 id="arg-指定传递给构建运行时的变量"><a class="header" href="#arg-指定传递给构建运行时的变量">ARG 指定传递给构建运行时的变量</a></h2>
<blockquote>
<p>ARG <name>[=<default value>]</p>
</blockquote>
<h2 id=""><a class="header" href="#"></a></h2>
<h2 id="示例dockerfile"><a class="header" href="#示例dockerfile">示例DockerFile</a></h2>
<h2 id="base-images"><a class="header" href="#base-images">Base images</a></h2>
<blockquote>
<p>FROM centos</p>
</blockquote>
<h2 id="maintainer-维护者信息-1"><a class="header" href="#maintainer-维护者信息-1">MAINTAINER 维护者信息</a></h2>
<blockquote>
<p>MAINTAINER Tangtang</p>
</blockquote>
<h2 id="add-将文件拷贝到容器中并自动解压"><a class="header" href="#add-将文件拷贝到容器中并自动解压">ADD 将文件拷贝到容器中并自动解压</a></h2>
<h2 id="下载nginx-并解压"><a class="header" href="#下载nginx-并解压">下载Nginx 并解压</a></h2>
<blockquote>
<p>ADD http://nginx.org/download/nginx-1.23.3.tar.gz /usr/local/</p>
</blockquote>
<h2 id="下载企业linux支持库因为该网站无法直接下载"><a class="header" href="#下载企业linux支持库因为该网站无法直接下载">下载企业linux支持库(因为该网站无法直接下载)</a></h2>
<blockquote>
<h2 id="httpsmirrorstunatsinghuaeducnepel7x86_64packageseepel-release-7-14noarchrpm"><a class="header" href="#httpsmirrorstunatsinghuaeducnepel7x86_64packageseepel-release-7-14noarchrpm">https://mirrors.tuna.tsinghua.edu.cn/epel/7/x86_64/Packages/e/epel-release-7-14.noarch.rpm</a></h2>
<p>ADD http://10.180.1.177/linux/package/rpm/epel-release-7-14.noarch.rpm /usr/local/</p>
</blockquote>
<h2 id="run-执行以下命令"><a class="header" href="#run-执行以下命令">RUN 执行以下命令</a></h2>
<h2 id="安装支持库"><a class="header" href="#安装支持库">安装支持库</a></h2>
<blockquote>
<p>RUN rpm -ivh /usr/local/epel-release-7-14.noarch.rpm </p>
</blockquote>
<h2 id="手动解压文件"><a class="header" href="#手动解压文件">手动解压文件</a></h2>
<blockquote>
<p>RUN tar zxvf /usr/local/nginx-1.23.3.tar.gz -C /usr/local/</p>
</blockquote>
<h2 id="调整url列表"><a class="header" href="#调整url列表">调整URL列表</a></h2>
<blockquote>
<p>RUN sed -i 's/mirrorlist/##mirrorlist/g' /etc/yum.repos.d/CentOS-*
RUN sed -i 's|##baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*</p>
</blockquote>
<h2 id="重新生成缓存"><a class="header" href="#重新生成缓存">重新生成缓存</a></h2>
<blockquote>
<p>RUN yum makecache</p>
</blockquote>
<h2 id="安装编译器"><a class="header" href="#安装编译器">安装编译器</a></h2>
<blockquote>
<p>RUN yum install -y wget lftp gcc gcc-c++ make openssl-devel pcre-devel pcre vim &amp;&amp; yum clean all </p>
</blockquote>
<h2 id="创建运行用户和组"><a class="header" href="#创建运行用户和组">创建运行用户和组</a></h2>
<blockquote>
<p>RUN groupadd Tang
RUN useradd -s /sbin/nologin -M Tang -g Tang</p>
</blockquote>
<h2 id="workdir-切换到nginx目录"><a class="header" href="#workdir-切换到nginx目录">WORKDIR 切换到Nginx目录</a></h2>
<blockquote>
<p>WORKDIR /usr/local/nginx-1.23.3/</p>
</blockquote>
<h2 id="编译配置"><a class="header" href="#编译配置">编译配置</a></h2>
<blockquote>
<p>RUN /usr/local/nginx-1.23.3/configure --prefix=/usr/local/nginx/ --user=Tang --group=Tang --with-http_ssl_module --with-pcre &amp;&amp; make &amp;&amp; make install</p>
</blockquote>
<h2 id="env-设置环境变量-1"><a class="header" href="#env-设置环境变量-1">ENV 设置环境变量</a></h2>
<blockquote>
<p>ENV PATH /usr/local/nginx/sbin:$PATH</p>
</blockquote>
<h2 id="映射端口"><a class="header" href="#映射端口">映射端口</a></h2>
<blockquote>
<p>EXPOSE 80</p>
</blockquote>
<h2 id="启动服务-前台启动服务"><a class="header" href="#启动服务-前台启动服务">启动服务 前台启动服务</a></h2>
<blockquote>
<p>CMD [&quot;/usr/local/nginx/sbin/nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</p>
</blockquote>
<h1 id="-1"><a class="header" href="#-1"></a></h1>
<h1 id="使用docker-compose批量管理容器"><a class="header" href="#使用docker-compose批量管理容器">使用docker-compose批量管理容器</a></h1>
<p>docker-compose.yml</p>
<p>文件内容如下</p>
<blockquote>
<p>version: '3.8'
services: 
mysql: </p>
</blockquote>
<pre><code>            # 在docker启动时启动服务
</code></pre>
<blockquote>
<p>restart: always</p>
</blockquote>
<pre><code>            # 使用的镜像
</code></pre>
<blockquote>
<p>image: mysql:5.7.5-m15</p>
</blockquote>
<pre><code>            # 容器名称
</code></pre>
<blockquote>
<p>container_name: Mysql</p>
</blockquote>
<pre><code>            # 端口映射
</code></pre>
<blockquote>
<p>ports:</p>
<pre><code>            -       3306:3306
</code></pre>
</blockquote>
<pre><code>            # 环境参数
</code></pre>
<blockquote>
<p>environment:</p>
</blockquote>
<pre><code>                    # 数据库密码
</code></pre>
<blockquote>
<p>MYSQL_ROOT_PASSWORD: 123456</p>
</blockquote>
<pre><code>                    # 指定时区
</code></pre>
<blockquote>
<p>TZ: Asia/Shanghai
volumes:</p>
</blockquote>
<pre><code>                    # 数据卷映射(容器内存在/var/lib/mysql/所以如果不指定根目录无法启动mysql容器)
</code></pre>
<blockquote>
<p>/docker_mysql/:/var/lib/mysql/
tomcat:</p>
</blockquote>
<pre><code>            # 在docker启动时启动服务
</code></pre>
<blockquote>
<p>restart: always</p>
</blockquote>
<pre><code>            # 使用的镜像
</code></pre>
<blockquote>
<p>image: tomcat:8.5.51</p>
</blockquote>
<pre><code>            # 容器名称
</code></pre>
<blockquote>
<p>container_name: Tomcat</p>
</blockquote>
<pre><code>            # 端口映射
</code></pre>
<blockquote>
<p>ports:</p>
<p>8070:8080
environment: </p>
</blockquote>
<h1 id="指定时区"><a class="header" href="#指定时区">指定时区</a></h1>
<blockquote>
<p>TZ: Asia/Shanghai
volumes:</p>
</blockquote>
<h1 id="数据卷映射"><a class="header" href="#数据卷映射">数据卷映射</a></h1>
<blockquote>
<p>/docker_tomcat/webapps:/usr/local/tomcat/webapps</p>
<p>/docker_tomcat/logs:/usr/local/tomcat/logs
nginx: </p>
</blockquote>
<pre><code>            # 在docker启动时启动服务
</code></pre>
<blockquote>
<p>restart: always</p>
</blockquote>
<pre><code>            # 使用本地自建镜像
</code></pre>
<blockquote>
<p>build: </p>
</blockquote>
<pre><code>                    # 构建镜像的配置文件的目录
</code></pre>
<blockquote>
<p>context: /root/nginxDocker/</p>
</blockquote>
<pre><code>                    # 构建镜像的配置文件的名称
</code></pre>
<blockquote>
<p>dockerfile: Dockerfile_nginx</p>
</blockquote>
<pre><code>            # 使用的镜像
</code></pre>
<blockquote>
<p>image: nginx:1.23.3</p>
</blockquote>
<pre><code>            # local_images: nginx:1.23.3
            # 容器名称
</code></pre>
<blockquote>
<p>container_name: Nginx</p>
</blockquote>
<pre><code>            # 端口映射
</code></pre>
<blockquote>
<p>ports:</p>
<p>82:80
environment: </p>
</blockquote>
<h1 id="指定时区-1"><a class="header" href="#指定时区-1">指定时区</a></h1>
<blockquote>
<p>TZ: Asia/Shanghai
volumes:</p>
</blockquote>
<h1 id="数据卷映射-1"><a class="header" href="#数据卷映射-1">数据卷映射</a></h1>
<blockquote>
<p>/docker_nginx/logs:/usr/local/nginx/logs</p>
</blockquote>
<h1 id="微服务镜像"><a class="header" href="#微服务镜像">微服务镜像			</a></h1>
<blockquote>
<p>FROM openjdk:8-jdk-alpine
ARG JAR_FILE
COPY ${JAR_FILE} app.jar
EXPOSE 10086
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</p>
</blockquote>
<h1 id="编译镜像"><a class="header" href="#编译镜像">编译镜像</a></h1>
<blockquote>
<p>docker build --build-arg JAR_FILE=xxx.jar -t ServiceName:Version</p>
</blockquote>
<h1 id="启动镜像"><a class="header" href="#启动镜像">启动镜像</a></h1>
<blockquote>
<p>docker run -di -p 10086:10086 ServiceName:Version</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="CompletableFuture.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="GC.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="CompletableFuture.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="GC.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
